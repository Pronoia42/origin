openapi: '3.0.0'
info:
  title: 'Origin Device Registry API'
  description: 'Swagger documentation for the Origin Device Registry API'
  version: '0.1'
  contact: {}
tags: []
servers: []
components:
  securitySchemes:
    access-token:
      scheme: 'bearer'
      bearerFormat: 'JWT'
      type: 'http'
  schemas:
    ExternalDeviceIdDTO:
      type: 'object'
      properties:
        id:
          type: 'string'
        type:
          type: 'string'
      required:
        - 'id'
        - 'type'
    OriginDeviceDTO:
      type: 'object'
      properties:
        externalRegistryId:
          type: 'string'
        smartMeterId:
          type: 'string'
        description:
          type: 'string'
        externalDeviceIds:
          type: 'array'
          items:
            $ref: '#/components/schemas/ExternalDeviceIdDTO'
        imageIds:
          type: 'array'
          items:
            type: 'string'
        id:
          type: 'string'
        owner:
          type: 'string'
      required:
        - 'externalRegistryId'
        - 'smartMeterId'
        - 'description'
        - 'id'
        - 'owner'
    NewDeviceDTO:
      type: 'object'
      properties:
        externalRegistryId:
          type: 'string'
        smartMeterId:
          type: 'string'
        description:
          type: 'string'
        externalDeviceIds:
          type: 'array'
          items:
            $ref: '#/components/schemas/ExternalDeviceIdDTO'
        imageIds:
          type: 'array'
          items:
            type: 'string'
      required:
        - 'externalRegistryId'
        - 'smartMeterId'
        - 'description'
paths:
  /api/device-registry:
    get:
      operationId: 'DeviceRegistryController_getAll'
      parameters: []
      responses:
        200:
          description: 'Returns all Devices'
          content:
            application/json:
              schema:
                type: 'array'
                items:
                  $ref: '#/components/schemas/OriginDeviceDTO'
      tags:
        - 'device'
      security:
        - access-token: []
    post:
      operationId: 'DeviceRegistryController_createDevice'
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewDeviceDTO'
      responses:
        201:
          description: 'Creates a Device'
          content:
            application/json:
              schema:
                type: 'string'
        403:
          description: "User doesn't have the correct permissions"
        422:
          description: 'Incorrect inputs'
      tags:
        - 'device'
      security:
        - access-token: []
  /api/device-registry/my-devices:
    get:
      operationId: 'DeviceRegistryController_getMyDevices'
      parameters: []
      responses:
        200:
          description: 'Returns my Devices'
          content:
            application/json:
              schema:
                type: 'array'
                items:
                  $ref: '#/components/schemas/OriginDeviceDTO'
      tags:
        - 'device'
      security:
        - access-token: []
  /api/device-registry/{id}:
    get:
      operationId: 'DeviceRegistryController_get'
      parameters:
        - name: 'id'
          required: true
          in: 'path'
          schema:
            type: 'string'
      responses:
        200:
          description: 'Returns a Device'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OriginDeviceDTO'
        404:
          description: "The device with the ID doesn't exist"
      tags:
        - 'device'
      security:
        - access-token: []
